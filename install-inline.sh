#!/bin/bash
# AI Novel Factory - å†…è”å®‰è£…è„šæœ¬
# ç›´æŽ¥å¤åˆ¶æ­¤è„šæœ¬å†…å®¹åˆ° OpenCode ä¸­æ‰§è¡Œå³å¯å®Œæˆå®‰è£…
# æˆ–è€…ä¿å­˜ä¸º install-inline.sh å¹¶è¿è¡Œ bash install-inline.sh

INSTALL_DIR="${1:-./studio}"

mkdir -p "$INSTALL_DIR"/{agents,automation,memory,story,characters,style,production/chapters,state}

# ============================================
# agents/story_architect.md
# ============================================
cat > "$INSTALL_DIR/agents/story_architect.md" << 'AGENT_EOF'
# Story Architect Agent

## è§’è‰²å®šä¹‰
ä½ æ˜¯ä¸–ç•Œæž„å»ºå¤§å¸ˆï¼Œè´Ÿè´£åˆ›å»ºå®Œæ•´ã€è‡ªæ´½ã€æœ‰å¸å¼•åŠ›çš„å°è¯´ä¸–ç•Œè§‚ã€‚

## æ ¸å¿ƒèŒè´£
1. è®¾è®¡ä¸–ç•Œåº•å±‚è§„åˆ™ï¼ˆåŠ›é‡ä½“ç³»ã€ç¤¾ä¼šç»“æž„ã€åœ°ç†çŽ¯å¢ƒï¼‰
2. ç¡®å®šæ•…äº‹ç±»åž‹ä¸Žæ ¸å¿ƒå–ç‚¹
3. æž„å»ºä¸–ç•Œè§‚è¾¹ç•Œä¸Žé™åˆ¶
4. è®¾è®¡æ ¸å¿ƒå†²çªæ¥æº

## è¾“å‡ºæ ¼å¼
è¾“å‡ºåˆ°: `story/world.md`

## è°ƒç”¨æ–¹å¼
```
@story_architect [æ•…äº‹ç±»åž‹] [ç›®æ ‡è¯»è€…] [é¢„æœŸç¯‡å¹…]
```
AGENT_EOF

# ============================================
# agents/volume_planner.md
# ============================================
cat > "$INSTALL_DIR/agents/volume_planner.md" << 'AGENT_EOF'
# Volume Planner Agent

## è§’è‰²å®šä¹‰
ä½ æ˜¯æ•…äº‹ç»“æž„è§„åˆ’å¸ˆï¼Œè´Ÿè´£å°†ä¸–ç•Œè§‚è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„å¤šå·å¤§çº²ã€‚

## æ ¸å¿ƒèŒè´£
1. è®¾è®¡æ•´ä½“æ•…äº‹æž¶æž„
2. è§„åˆ’åˆ†å·èŠ‚å¥
3. ç¡®å®šæ¯å·æ ¸å¿ƒäº‹ä»¶
4. è®¾è®¡é«˜æ½®ä¸Žè½¬æŠ˜ç‚¹

## è¾“å‡ºæ ¼å¼
è¾“å‡ºåˆ°: `story/master_outline.md`

## è°ƒç”¨æ–¹å¼
```
@volume_planner
```
AGENT_EOF

# ============================================
# agents/chapter_planner.md
# ============================================
cat > "$INSTALL_DIR/agents/chapter_planner.md" << 'AGENT_EOF'
# Chapter Planner Agent

## è§’è‰²å®šä¹‰
ä½ æ˜¯ç« èŠ‚ç»“æž„è®¾è®¡å¸ˆï¼Œè´Ÿè´£å°†åˆ†å·å¤§çº²ç»†åŒ–ä¸ºå•ç« å†™ä½œè“å›¾ã€‚

## æ ¸å¿ƒèŒè´£
1. è®¾è®¡å•ç« ç»“æž„
2. ç¡®å®šç« èŠ‚æ ¸å¿ƒäº‹ä»¶
3. è§„åˆ’æƒ…ç»ªæ›²çº¿
4. è®¾è®¡çˆ½ç‚¹/é’©å­

## è¾“å‡ºæ ¼å¼
è¾“å‡ºåˆ°: `state/chapter_plan_[ç¼–å·].md`

## è°ƒç”¨æ–¹å¼
```
@chapter_planner [ç« èŠ‚ç¼–å·]
```
AGENT_EOF

# ============================================
# agents/writer.md
# ============================================
cat > "$INSTALL_DIR/agents/writer.md" << 'AGENT_EOF'
# Writer Agent

## è§’è‰²å®šä¹‰
ä½ æ˜¯æ­£æ–‡åˆ›ä½œæ‰§è¡Œè€…ï¼Œæ ¹æ®ç« èŠ‚è®¡åˆ’ç”Ÿæˆé«˜è´¨é‡æ­£æ–‡å†…å®¹ã€‚

## å¿…é¡»åŠ è½½çš„ä¸Šä¸‹æ–‡ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰
1. `characters/protagonist.md` - ä¸»è§’è®¾å®š
2. `story/world.md` - ä¸–ç•Œè§‚
3. `memory/canon.md` - æ ¸å¿ƒè®¾å®š
4. æœ€è¿‘2-3ç« æ­£æ–‡
5. å½“å‰ç« èŠ‚è®¡åˆ’
6. `style/` ç›®å½•ä¸‹çš„æ–‡é£ŽæŒ‡å¯¼

## è¾“å‡ºæ ¼å¼
è¾“å‡ºåˆ°: `production/chapters/ç¬¬Xç« _[æ ‡é¢˜].md`

## è°ƒç”¨æ–¹å¼
```
@writer [ç« èŠ‚ç¼–å·]
```
AGENT_EOF

# ============================================
# agents/editor.md
# ============================================
cat > "$INSTALL_DIR/agents/editor.md" << 'AGENT_EOF'
# Editor Agent

## è§’è‰²å®šä¹‰
ä½ æ˜¯æ–‡å­¦è´¨é‡æŠŠæŽ§å¸ˆï¼Œè´Ÿè´£å®¡æ ¸å’Œä¼˜åŒ–å·²ç”Ÿæˆçš„ç« èŠ‚å†…å®¹ã€‚

## æ£€æŸ¥ç»´åº¦
1. å™äº‹è´¨é‡
2. äººç‰©ä¸€è‡´æ€§
3. è®¾å®šä¸€è‡´æ€§
4. æ–‡é£Žç»Ÿä¸€
5. çˆ½ç‚¹å¯†åº¦

## è¾“å‡ºæ ¼å¼
è¾“å‡ºåˆ°: `state/review_[ç« èŠ‚ç¼–å·].md`

## è°ƒç”¨æ–¹å¼
```
@editor [ç« èŠ‚ç¼–å·æˆ–èŒƒå›´]
```
AGENT_EOF

# ============================================
# agents/memory_keeper.md
# ============================================
cat > "$INSTALL_DIR/agents/memory_keeper.md" << 'AGENT_EOF'
# Memory Keeper Agent

## è§’è‰²å®šä¹‰
ä½ æ˜¯é•¿æœŸè®°å¿†ç»´æŠ¤è€…ï¼Œè´Ÿè´£ç®¡ç†å’Œæ›´æ–°å°è¯´çš„è®°å¿†åº“ã€‚

## ç®¡ç†çš„è®°å¿†æ–‡ä»¶
- canon.md - æ ¸å¿ƒè®¾å®š
- world_rules.md - ä¸–ç•Œè§„åˆ™
- characters_evolution.md - äººç‰©æˆé•¿
- foreshadowing.md - ä¼ç¬”è¿½è¸ª

## è°ƒç”¨æ–¹å¼
```
@memory_keeper [ç« èŠ‚ç¼–å·]
```
AGENT_EOF

# ============================================
# agents/style_controller.md
# ============================================
cat > "$INSTALL_DIR/agents/style_controller.md" << 'AGENT_EOF'
# Style Controller Agent

## è§’è‰²å®šä¹‰
ä½ æ˜¯æ–‡é£Žç»Ÿä¸€ç®¡æŽ§è€…ï¼Œè´Ÿè´£ç¡®ä¿æ•´éƒ¨ä½œå“çš„æ–‡å­—é£Žæ ¼ä¸€è‡´ã€‚

## ç®¡ç†çš„é£Žæ ¼æ–‡ä»¶
- style/tone.md - æ•´ä½“è¯­æ°”
- style/rhythm.md - å¥å¼èŠ‚å¥
- style/dialogue.md - å¯¹ç™½é£Žæ ¼

## è°ƒç”¨æ–¹å¼
```
@style_controller [ç« èŠ‚ç¼–å·]
```
AGENT_EOF

# ============================================
# automation/daily_pipeline.md
# ============================================
cat > "$INSTALL_DIR/automation/daily_pipeline.md" << 'AGENT_EOF'
# Daily Pipeline Agent

## åŠŸèƒ½å®šä¹‰
ä¸€é”®æ‰§è¡Œå®Œæ•´çš„åˆ›ä½œæµæ°´çº¿ã€‚

## æ‰§è¡Œæµç¨‹
1. è¯»å–å½“å‰çŠ¶æ€
2. åŠ è½½å¿…è¦ä¸Šä¸‹æ–‡
3. è°ƒç”¨ chapter_planner
4. è°ƒç”¨ writer
5. è°ƒç”¨ style_controller
6. æ›´æ–°è®°å¿†åº“

## è°ƒç”¨æ–¹å¼
```
@daily_pipeline
```
AGENT_EOF

# ============================================
# automation/generate_next_chapter.md
# ============================================
cat > "$INSTALL_DIR/automation/generate_next_chapter.md" << 'AGENT_EOF'
# Generate Next Chapter Agent

## åŠŸèƒ½å®šä¹‰
è‡ªåŠ¨åŒ–ç« èŠ‚ç”Ÿæˆï¼Œæ•´åˆå¤šä¸ªAgentå®Œæˆä»Žè®¡åˆ’åˆ°æˆç¨¿ã€‚

## è°ƒç”¨æ–¹å¼
```
@generate_next_chapter
```
AGENT_EOF

# ============================================
# automation/memory_update.md
# ============================================
cat > "$INSTALL_DIR/automation/memory_update.md" << 'AGENT_EOF'
# Memory Update Agent

## åŠŸèƒ½å®šä¹‰
è‡ªåŠ¨æ‰«ææ–°ç« èŠ‚å†…å®¹ï¼Œæå–å¹¶æ›´æ–°è®°å¿†åº“ã€‚

## è°ƒç”¨æ–¹å¼
```
@memory_update [ç« èŠ‚ç¼–å·]
```
AGENT_EOF

# ============================================
# automation/consistency_check.md
# ============================================
cat > "$INSTALL_DIR/automation/consistency_check.md" << 'AGENT_EOF'
# Consistency Check Agent

## åŠŸèƒ½å®šä¹‰
å…¨é¢æ£€æŸ¥ç« èŠ‚ä¸Žè®°å¿†åº“ã€è®¾å®šçš„ä¸ä¸€è‡´é—®é¢˜ã€‚

## æ£€æŸ¥ç»´åº¦
- è®¾å®šä¸€è‡´æ€§
- äººç‰©ä¸€è‡´æ€§
- å‰§æƒ…ä¸€è‡´æ€§
- ç»†èŠ‚ä¸€è‡´æ€§

## è°ƒç”¨æ–¹å¼
```
@consistency_check [ç« èŠ‚èŒƒå›´]
```
AGENT_EOF

# ============================================
# memory/canon.md
# ============================================
cat > "$INSTALL_DIR/memory/canon.md" << 'MEMORY_EOF'
# Canon - æ ¸å¿ƒè®¾å®š

> æœ¬æ–‡ä»¶è®°å½•ä¸å¯æŽ¨ç¿»çš„åŸºç¡€è®¾å®š

## ä¸–ç•Œè§‚æ ¸å¿ƒ

### æ•…äº‹ç±»åž‹
[å¡«å†™]

### æ ¸å¿ƒå–ç‚¹
[å¡«å†™]

## åŠ›é‡ä½“ç³»

### ç­‰çº§åˆ’åˆ†
| ç­‰çº§ | åç§° | èƒ½åŠ›èŒƒå›´ |
|-----|-----|---------|
| 1 | | |
| 2 | | |

### åŠ›é‡ä¸Šé™
[å¡«å†™]

## æ ¸å¿ƒè§„åˆ™

### ä¸å¯è¿èƒŒçš„é™åˆ¶
1. 
2. 

## ç¦å¿Œè®¾å®š
1. 
2. 
MEMORY_EOF

# ============================================
# memory/world_rules.md
# ============================================
cat > "$INSTALL_DIR/memory/world_rules.md" << 'MEMORY_EOF'
# World Rules - ä¸–ç•Œè§„åˆ™

## ç¤¾ä¼šç»“æž„

### ä¸»è¦åŠ¿åŠ›
| åŠ¿åŠ›åç§° | æ€§è´¨ | å®žåŠ›èŒƒå›´ |
|---------|-----|---------|
| | | |

## åœ°ç†çŽ¯å¢ƒ

### é‡è¦åœ°ç‚¹
| åœ°ç‚¹ | ä½ç½® | æ„ä¹‰ |
|-----|-----|-----|
| | | |
MEMORY_EOF

# ============================================
# memory/characters_evolution.md
# ============================================
cat > "$INSTALL_DIR/memory/characters_evolution.md" << 'MEMORY_EOF'
# Characters Evolution - äººç‰©æˆé•¿æ—¥å¿—

## ä¸»è§’

### èƒ½åŠ›æˆé•¿
| ç« èŠ‚ | ç­‰çº§å˜åŒ– | æ–°èƒ½åŠ› |
|-----|---------|-------|
| 1 | | |

### é‡è¦ç‰©å“
| ç« èŠ‚ | ç‰©å“ | ä½œç”¨ |
|-----|-----|-----|

### å…³ç³»å˜åŒ–
| ç« èŠ‚ | å¯¹è±¡ | å…³ç³»å˜åŒ– |
|-----|-----|---------|
| | | |
MEMORY_EOF

# ============================================
# memory/foreshadowing.md
# ============================================
cat > "$INSTALL_DIR/memory/foreshadowing.md" << 'MEMORY_EOF'
# Foreshadowing - ä¼ç¬”è¿½è¸ª

## ä¼ç¬”çŠ¶æ€è¯´æ˜Ž
- ðŸ”´ æœªå›žæ”¶
- ðŸŸ¡ éƒ¨åˆ†å›žæ”¶
- ðŸŸ¢ å·²å›žæ”¶

## ä¼ç¬”æ€»è§ˆ
| ç¼–å· | ç®€è¿° | åŸ‹è®¾ç« èŠ‚ | è®¡åˆ’å›žæ”¶ | çŠ¶æ€ |
|-----|-----|---------|---------|-----|
| F001 | | ç¬¬Xç«  | ç¬¬Xç«  | ðŸ”´ |
MEMORY_EOF

# ============================================
# story/world.md
# ============================================
cat > "$INSTALL_DIR/story/world.md" << 'STORY_EOF'
# World - ä¸–ç•Œè§‚è®¾å®š

## åŸºæœ¬ä¿¡æ¯

### æ•…äº‹ç±»åž‹
[å¡«å†™ï¼šçŽ„å¹»/éƒ½å¸‚/ç§‘å¹»/è¨€æƒ…/æ‚¬ç–‘/...]

### æ ¸å¿ƒå–ç‚¹
[ä¸€å¥è¯æ¦‚æ‹¬]

### ç›®æ ‡è¯»è€…
[å¡«å†™]

### é¢„æœŸç¯‡å¹…
[å¡«å†™]

## ä¸–ç•Œåº•å±‚è§„åˆ™

### åŠ›é‡ä½“ç³»
[è¯¦ç»†æè¿°åŠ›é‡æ¥æºã€ç­‰çº§åˆ’åˆ†ã€æ™‹å‡æ¡ä»¶]

### ç¤¾ä¼šç»“æž„
[æè¿°æƒåŠ›åˆ†å¸ƒã€ä¸»è¦åŠ¿åŠ›ã€ç¤¾ä¼šé˜¶å±‚]

### åœ°ç†çŽ¯å¢ƒ
[æè¿°ä¸–ç•Œåœ°å›¾ã€é‡è¦åœ°ç‚¹]

## ä¸–ç•Œè¾¹ç•Œ

### ä¸å¯çªç ´çš„é™åˆ¶
1. 
2. 

## æ ¸å¿ƒå†²çªæ¥æº
[æè¿°æŽ¨åŠ¨æ•…äº‹çš„æ ¸å¿ƒçŸ›ç›¾]

## ç¦å¿Œè®¾å®š
1. 
2. 
STORY_EOF

# ============================================
# story/master_outline.md
# ============================================
cat > "$INSTALL_DIR/story/master_outline.md" << 'STORY_EOF'
# Master Outline - ä¸»çº¿å¤§çº²

## æ•…äº‹ä¸»é¢˜
[ä¸€å¥è¯æ¦‚æ‹¬]

## æ€»ä½“æž¶æž„
- æ€»å·æ•°ï¼š
- æ€»ç« èŠ‚æ•°ï¼š
- æ€»å­—æ•°ï¼š

## åˆ†å·è§„åˆ’

### ç¬¬ä¸€å·ï¼š[å·å]
- å­—æ•°é¢„ä¼°ï¼š
- ç« èŠ‚èŒƒå›´ï¼šç¬¬1-XXç« 
- æ ¸å¿ƒç›®æ ‡ï¼š
- å‰§æƒ…æ¢—æ¦‚ï¼š
- å·æœ«é«˜æ½®ï¼š

### ç¬¬äºŒå·ï¼š[å·å]
...

## æ ¸å¿ƒä¼ç¬”åˆ—è¡¨
| ç¼–å· | ä¼ç¬”å†…å®¹ | åŸ‹è®¾ç« èŠ‚ | è®¡åˆ’å›žæ”¶ |
|-----|---------|---------|---------|
| F001 | | | |
STORY_EOF

# ============================================
# characters/protagonist.md
# ============================================
cat > "$INSTALL_DIR/characters/protagonist.md" << 'CHAR_EOF'
# Protagonist - ä¸»è§’è®¾å®š

## åŸºæœ¬ä¿¡æ¯
- å§“åï¼š
- å¹´é¾„ï¼š
- èº«ä»½ï¼š
- å¤–è²Œï¼š

## æ€§æ ¼ç‰¹è´¨

### æ ¸å¿ƒæ€§æ ¼
[3-5ä¸ªç‰¹ç‚¹]

### ä¼˜ç‚¹
1. 
2. 

### ç¼ºç‚¹
1. 
2. 

## èƒŒæ™¯æ•…äº‹
[ä¸»è§’çš„å‡ºèº«å’Œæˆé•¿ç»åŽ†]

## æ ¸å¿ƒç›®æ ‡

### è¡¨é¢ç›®æ ‡
[è¡¨é¢ä¸Šè¿½æ±‚çš„]

### æ·±å±‚ç›®æ ‡
[å†…å¿ƒçœŸæ­£æ¸´æœ›çš„]

## é‡‘æ‰‹æŒ‡/ç‰¹æ®Šèƒ½åŠ›

### èƒ½åŠ›æè¿°
[èƒ½åŠ›çš„å…·ä½“è¡¨çŽ°]

### èƒ½åŠ›é™åˆ¶
[èƒ½åŠ›çš„é™åˆ¶æˆ–ä»£ä»·]

## äººç‰©å…³ç³»

### å®¶åº­
| äººç‰© | å…³ç³» | ç›¸å¤„æ¨¡å¼ |
|-----|-----|---------|
| | | |

### æœ‹å‹/ç›Ÿå‹
| äººç‰© | å…³ç³» |
|-----|-----|
| | |

### æ•Œäºº
| äººç‰© | å†²çªåŽŸå›  |
|-----|---------|
| | |
CHAR_EOF

# ============================================
# characters/character_template.md
# ============================================
cat > "$INSTALL_DIR/characters/character_template.md" << 'CHAR_EOF'
# Character Template - è§’è‰²è®¾å®šæ¨¡æ¿

## åŸºæœ¬ä¿¡æ¯
- å§“åï¼š
- å¹´é¾„ï¼š
- èº«ä»½ï¼š
- åŠ¿åŠ›ï¼š

## å¤–è²Œæè¿°
[è¯¦ç»†æå†™]

## æ€§æ ¼ç‰¹è´¨
- æ ¸å¿ƒæ€§æ ¼ï¼š
- ä¼˜ç‚¹ï¼š
- ç¼ºç‚¹ï¼š

## ä¸Žä¸»è§’å…³ç³»
- å…³ç³»ç±»åž‹ï¼šç›Ÿå‹/ä¸­ç«‹/æ•Œå¯¹
- å…³ç³»è¯¦æƒ…ï¼š

## èƒ½åŠ›è®¾å®š
- ç­‰çº§ï¼š
- ç‰¹æ®Šèƒ½åŠ›ï¼š

## è¯­è¨€ç‰¹ç‚¹
- è¯´è¯é£Žæ ¼ï¼š
- å£å¤´ç¦…ï¼š

## æ•…äº‹åŠŸèƒ½
- è§’è‰²ä½œç”¨ï¼š
- å‡ºåœºé¢‘çŽ‡ï¼š
CHAR_EOF

# ============================================
# style/tone.md
# ============================================
cat > "$INSTALL_DIR/style/tone.md" << 'STYLE_EOF'
# Tone - æ•´ä½“è¯­æ°”

## å™äº‹è§†è§’
- [ ] ç¬¬ä¸€äººç§°
- [ ] ç¬¬ä¸‰äººç§°é™åˆ¶è§†è§’
- [ ] ç¬¬ä¸‰äººç§°å…¨çŸ¥è§†è§’

## æ•´ä½“æ°›å›´
- [ ] è½»æ¾å¹½é»˜
- [ ] çƒ­è¡€æ¿€æ˜‚
- [ ] æ¸©æƒ…æ²»æ„ˆ
- [ ] é»‘æš—åŽ‹æŠ‘
- [ ] æ‚¬ç–‘ç´§å¼ 

## å™äº‹å£°éŸ³
- å™è¿°å£°éŸ³ï¼š[å†·é™/çƒ­æƒ…/å¹½é»˜/ä¸¥è‚ƒ]
- ä¸Žè¯»è€…çš„è·ç¦»ï¼š[äº²è¿‘/ç–ç¦»]
STYLE_EOF

# ============================================
# style/rhythm.md
# ============================================
cat > "$INSTALL_DIR/style/rhythm.md" << 'STYLE_EOF'
# Rhythm - å¥å¼èŠ‚å¥

## å¥å­é•¿åº¦åå¥½
- çŸ­å¥æ¯”ä¾‹ï¼š30%
- ä¸­å¥æ¯”ä¾‹ï¼š50%
- é•¿å¥æ¯”ä¾‹ï¼š20%

## èŠ‚å¥å˜åŒ–

### å¿«èŠ‚å¥åœºæ™¯ï¼ˆæˆ˜æ–—ã€å±æœºï¼‰
- çŸ­å¥ä¸ºä¸»
- åŠ¨è¯å¯†é›†
- æ®µè½çŸ­å°

### æ…¢èŠ‚å¥åœºæ™¯ï¼ˆæ—¥å¸¸ã€å¿ƒç†ï¼‰
- é•¿å¥è¾ƒå¤š
- æå†™ç»†è…»
- èŠ‚å¥èˆ’ç¼“
STYLE_EOF

# ============================================
# style/dialogue.md
# ============================================
cat > "$INSTALL_DIR/style/dialogue.md" << 'STYLE_EOF'
# Dialogue - å¯¹ç™½é£Žæ ¼

## æ•´ä½“é£Žæ ¼
- [ ] å£è¯­åŒ–
- [ ] ä¹¦é¢åŒ–
- [ ] æ··åˆé£Žæ ¼

## å¯¹è¯æ ‡ç­¾
- ä½¿ç”¨ç¬¦å·ï¼šã€Œã€æˆ– ""

## å¯¹è¯ä¸Žå™è¿°æ¯”ä¾‹
- å¯¹è¯å æ¯”ï¼šçº¦40%
- å™è¿°å æ¯”ï¼šçº¦60%

## å¯¹è¯åŽŸåˆ™
1. å¯¹è¯éœ€æŽ¨åŠ¨æƒ…èŠ‚æˆ–å¡‘é€ äººç‰©
2. æ¯å¥å¯¹è¯åº”æœ‰è¯´è¯äººç‰¹å¾
3. é¿å…ä¿¡æ¯å€¾æ³»å¼å¯¹è¯
STYLE_EOF

# ============================================
# production/chapters/chapter_template.md
# ============================================
cat > "$INSTALL_DIR/production/chapters/chapter_template.md" << 'CHAPTER_EOF'
# ç¬¬Xç«  [ç« èŠ‚æ ‡é¢˜]

[æ­£æ–‡å†…å®¹]

---

## ç« èŠ‚å…ƒæ•°æ®
- ç« èŠ‚ï¼šç¬¬Xç« 
- å­—æ•°ï¼šXXXXå­—
- åˆ›ä½œæ—¥æœŸï¼šYYYY-MM-DD

## æ ¸å¿ƒäº‹ä»¶
[æœ¬ç« æ ¸å¿ƒäº‹ä»¶]

## ä¼ç¬”æ“ä½œ
- åŸ‹è®¾ï¼š
- å›žæ”¶ï¼š
CHAPTER_EOF

# ============================================
# state/current_chapter.txt
# ============================================
echo "1" > "$INSTALL_DIR/state/current_chapter.txt"

# ============================================
# state/pipeline_config.txt
# ============================================
cat > "$INSTALL_DIR/state/pipeline_config.txt" << 'CONFIG_EOF'
target_word_count=2500
auto_skip_check=false
auto_memory_update=true
max_continuous_chapters=5
quality_threshold=7
style_check=true
consistency_check=true
CONFIG_EOF

# ============================================
# README.md
# ============================================
cat > "$INSTALL_DIR/README.md" << 'README_EOF'
# AI Novel Factory

å®Œæ•´çš„ AI å°è¯´å†™ä½œç³»ç»Ÿã€‚

## å¿«é€Ÿå¼€å§‹

1. å¡«å†™åŸºç¡€è®¾å®š
   - `story/world.md` - ä¸–ç•Œè§‚
   - `story/master_outline.md` - å¤§çº²
   - `characters/protagonist.md` - ä¸»è§’

2. é…ç½®æ–‡é£Žï¼ˆå¯é€‰ï¼‰
   - `style/tone.md`
   - `style/rhythm.md`
   - `style/dialogue.md`

3. å¼€å§‹åˆ›ä½œ
   ```
   @daily_pipeline
   ```

## å¯ç”¨å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `@daily_pipeline` | ä¸€é”®ç”Ÿæˆä¸‹ä¸€ç«  |
| `@story_architect` | åˆ›å»ºä¸–ç•Œè§‚ |
| `@volume_planner` | ç”Ÿæˆåˆ†å·å¤§çº² |
| `@writer [ç« èŠ‚]` | å†™ä½œç« èŠ‚ |
| `@editor [ç« èŠ‚]` | è´¨é‡æ£€æŸ¥ |

## æ–‡ä»¶ç»“æž„

```
studio/
â”œâ”€â”€ agents/        # Agent å®šä¹‰
â”œâ”€â”€ automation/    # è‡ªåŠ¨åŒ–æµç¨‹
â”œâ”€â”€ memory/        # è®°å¿†ç³»ç»Ÿ
â”œâ”€â”€ story/         # æ•…äº‹è®¾å®š
â”œâ”€â”€ characters/    # è§’è‰²è®¾å®š
â”œâ”€â”€ style/         # æ–‡é£ŽæŽ§åˆ¶
â”œâ”€â”€ production/    # è¾“å‡ºç›®å½•
â””â”€â”€ state/         # çŠ¶æ€ç®¡ç†
```
README_EOF

echo ""
echo "=========================================="
echo "   âœ… AI Novel Factory å®‰è£…å®Œæˆï¼"
echo "=========================================="
echo ""
echo "å®‰è£…ç›®å½•: $INSTALL_DIR"
echo ""
echo "ðŸ“– ä¸‹ä¸€æ­¥:"
echo "1. å¡«å†™ $INSTALL_DIR/story/world.md"
echo "2. å¡«å†™ $INSTALL_DIR/story/master_outline.md"
echo "3. å¡«å†™ $INSTALL_DIR/characters/protagonist.md"
echo "4. æ‰§è¡Œ @daily_pipeline å¼€å§‹åˆ›ä½œ"
echo ""
